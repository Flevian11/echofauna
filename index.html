<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>EchoFauna — Reviving the Voices of the Extinct</title>
  <meta name="description" content="EchoFauna — an AI-powered archive that reconstructs extinct animals with art, science and immersive tech." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Spectral:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/controls/OrbitControls.min.js"></script>
  <style>
    /* =========== Base / Reset =========== */
    :root{
      --bg:#0b0f14; /* dark slate */
      --card:#0f1720;
      --accent:#06f7ff; /* neon cyan */
      --accent-2:#a9ff33; /* bio-lime */
      --muted:#dfe7eb; /* fossil white */
      --gold:#c68b2e;
      --glass: rgba(255,255,255,0.04);
      --glass-2: rgba(255,255,255,0.02);
      --radius:14px;
      --error: #ff3366;
      --success: #33ff88;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;padding:0;min-height:100%;
      font-family: 'Spectral', Georgia, serif;
      background: radial-gradient(1200px 800px at 10% 10%, rgba(6,247,255,0.03), transparent),
                  radial-gradient(800px 600px at 90% 80%, rgba(169,255,51,0.02), transparent),
                  linear-gradient(180deg,var(--bg), #051018 120%);
      color:var(--muted);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }
    a{color:inherit;text-decoration:none}
    .container{max-width:1400px;margin:0 auto;padding:36px}

    /* =========== Header =========== */
    header{display:flex;align-items:center;justify-content:space-between;padding:18px 0;position:relative;z-index:100}
    .brand{display:flex;gap:14px;align-items:center}
    .logo{
      width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));
      box-shadow:0 8px 30px rgba(10,200,255,0.06), inset 0 -6px 18px rgba(255,255,255,0.06);
      display:flex;align-items:center;justify-content:center;flex-shrink:0;
      animation: logoPulse 8s infinite;
    }
    @keyframes logoPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    .logo svg{width:36px;height:36px;filter:drop-shadow(0 8px 18px rgba(6,247,255,0.12))}
    .brand h1{font-family:'Orbitron',sans-serif;font-weight:700;margin:0;font-size:18px;letter-spacing:0.6px}
    .brand p{margin:0;font-size:12px;color:rgba(223,231,235,0.7)}

    nav{display:flex;gap:12px;align-items:center}
    .btn{padding:10px 14px;border-radius:12px;background:transparent;border:1px solid rgba(255,255,255,0.06);backdrop-filter:blur(6px);transition:all 0.3s ease;font-family:'Orbitron',sans-serif;font-weight:500;position:relative;overflow:hidden}
    .btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.1),transparent);transition:left 0.5s}
    .btn:hover::before{left:100%}
    .btn.cta{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#021017;border:0;font-weight:700}
    .btn:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(6,247,255,0.2)}
    .btn.cta:hover{box-shadow:0 6px 16px rgba(169,255,51,0.3)}

    /* Mobile menu */
    .mobile-menu-btn{display:none;flex-direction:column;gap:4px;background:transparent;border:none;cursor:pointer}
    .mobile-menu-btn span{width:24px;height:2px;background:var(--muted);transition:all 0.3s ease}
    .mobile-menu-btn.active span:nth-child(1){transform:rotate(45deg) translate(5px,5px)}
    .mobile-menu-btn.active span:nth-child(2){opacity:0}
    .mobile-menu-btn.active span:nth-child(3){transform:rotate(-45deg) translate(7px,-6px)}

    /* =========== Hero =========== */
    .hero{position:relative;padding:48px 0 80px;display:grid;grid-template-columns:1fr 420px;gap:40px;align-items:center;min-height:80vh}
    .hero-left{padding-right:18px}
    .eyebrow{display:inline-block;padding:6px 10px;border-radius:999px;background:var(--glass);font-size:13px;color:var(--accent-2);margin-bottom:14px;animation: fadeIn 1s ease}
    h2{font-family:'Orbitron',sans-serif;font-size:48px;line-height:1.02;margin:0 0 12px;color:var(--muted);animation: slideIn 1s ease}
    p.lead{color:rgba(223,231,235,0.8);font-size:18px;margin:0 0 18px;animation: fadeIn 1.2s ease}
    .hero-ctas{display:flex;gap:12px;animation: fadeIn 1.4s ease}

    /* particle canvas overlay */
    #particles{position:absolute;inset:0;pointer-events:none;z-index:0}

    /* hero right: 3D reveal card */
    .reveal-card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:16px;padding:18px;border:1px solid rgba(255,255,255,0.04);box-shadow: 0 20px 40px rgba(2,8,14,0.6);transition:transform 0.3s ease;animation: float 6s ease-in-out infinite;position:relative;z-index:10}
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    .reveal-card:hover{transform:translateY(-5px) scale(1.02)}
    .reveal-canvas{width:100%;height:420px;border-radius:12px;overflow:hidden;background:linear-gradient(180deg,#061018, #04121a);position:relative}
    .reveal-meta{display:flex;justify-content:space-between;align-items:center;padding-top:12px}
    .tag{font-size:12px;color:var(--accent);font-weight:700}

    /* =========== Sections =========== */
    section{padding:48px 0;position:relative}
    .glass-card{background:var(--glass);padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);backdrop-filter:blur(10px)}

    /* holographic globe */
    .globe-wrap{height:360px;border-radius:14px;overflow:hidden;background:linear-gradient(180deg,#041018, #05131a);display:flex;align-items:center;justify-content:center;border:1px solid rgba(255,255,255,0.03);position:relative}
    .globe-overlay{position:absolute;color:rgba(223,231,235,0.9);text-align:center}

    /* featured species carousel */
    .carousel{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-top:18px}
    .card{background:var(--card);padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);min-height:240px;display:flex;flex-direction:column;transition:transform 0.3s ease, box-shadow 0.3s ease;position:relative;overflow:hidden}
    .card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--accent),var(--accent-2));transform:scaleX(0);transition:transform 0.3s ease}
    .card:hover::before{transform:scaleX(1)}
    .card:hover{transform:translateY(-5px);box-shadow:0 10px 20px rgba(6,247,255,0.1)}
    .card .img{height:140px;border-radius:8px;display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}
    .card .img img{width:100%;height:100%;object-fit:cover;transition:transform 0.5s ease}
    .card:hover .img img{transform:scale(1.05)}
    .meta{margin-top:10px}
    .meta h4{margin:0 0 6px;font-family:'Orbitron',sans-serif}
    .meta p{margin:0;color:rgba(223,231,235,0.65);font-size:13px}

    /* story section */
    .story-container{position:relative;height:400px;overflow:hidden;border-radius:12px;background:linear-gradient(90deg,#021517,#041b1f)}
    .story-scene{position:absolute;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;opacity:0;transition:opacity 0.8s ease;padding:40px;text-align:center;background-size:cover;background-position:center}
    .story-scene.active{opacity:1}
    .story-nav{display:flex;justify-content:center;gap:10px;margin-top:15px}
    .story-dot{width:12px;height:12px;border-radius:50%;background:rgba(223,231,235,0.3);cursor:pointer;transition:all 0.3s ease}
    .story-dot.active{background:var(--accent);transform:scale(1.2)}
    .story-controls{display:flex;justify-content:center;gap:15px;margin-top:20px}
    .story-btn{background:rgba(255,255,255,0.1);border:none;color:var(--muted);width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.3s ease}
    .story-btn:hover{background:var(--accent);color:var(--bg)}
    .story-title{font-family:'Orbitron',sans-serif;font-size:24px;margin-bottom:10px;color:var(--accent)}
    .story-content{max-width:600px;font-size:18px;line-height:1.6}

    /* lab console */
    .lab{display:grid;grid-template-columns:1fr 360px;gap:18px;align-items:start}
    .console{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.03)}
    .slider{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}
    .slider label{font-size:12px;color:rgba(223,231,235,0.75)}
    input[type=range]{width:100%;-webkit-appearance:none;height:4px;background:rgba(255,255,255,0.1);border-radius:2px;outline:none}
    input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;border-radius:50%;background:var(--accent);cursor:pointer;box-shadow:0 0 10px var(--accent)}

    /* ecosystem simulator */
    .ecosim{height:160px;border-radius:12px;padding:12px;background:linear-gradient(90deg, rgba(10,10,10,0.2), rgba(6,20,22,0.2));border:1px solid rgba(255,255,255,0.02)}
    .progress{height:12px;background:rgba(255,255,255,0.06);border-radius:999px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent-2));width:0%;transition:width 1s ease}

    /* community grid */
    .masonry{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
    .masonry .m{height:120px;border-radius:10px;background:linear-gradient(120deg,#021018,#05121a);border:1px solid rgba(255,255,255,0.03);padding:8px;display:flex;flex-direction:column;justify-content:center;transition:transform 0.3s ease;position:relative;overflow:hidden}
    .masonry .m::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg,transparent,rgba(6,247,255,0.05),transparent);transform:translateX(-100%);transition:transform 0.6s}
    .masonry .m:hover::before{transform:translateX(100%)}
    .masonry .m:hover{transform:translateY(-3px)}

    /* footer */
    footer{padding:40px 0;border-top:1px solid rgba(255,255,255,0.02)}
    .social-links{display:flex;gap:12px;margin-top:10px}
    .social-links a{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.05);transition:all 0.3s ease}
    .social-links a:hover{background:var(--accent);color:var(--bg)}

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes slideIn {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    /* AI Lab specific styles */
    .ai-preview {
      position: relative;
      height: 300px;
      border-radius: 10px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(120deg,#021018,#05131a);
      border: 1px solid rgba(255,255,255,0.03);
    }
    
    .ai-preview img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      transition: opacity 0.5s ease;
      border-radius: 8px;
    }
    
    .ai-preview .placeholder {
      color: rgba(223,231,235,0.6);
      text-align: center;
      padding: 20px;
    }
    
    .search-results {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-top: 15px;
      max-height: 200px;
      overflow-y: auto;
    }
    
    .search-result {
      border-radius: 8px;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.2s ease;
      border: 1px solid rgba(255,255,255,0.05);
    }
    
    .search-result:hover {
      transform: scale(1.05);
      border-color: var(--accent);
    }
    
    .search-result img {
      width: 100%;
      height: 80px;
      object-fit: cover;
    }

    /* Morphing animation for hero */
    .morph-path {
      animation: morph 8s ease-in-out infinite;
    }
    
    @keyframes morph {
      0% { d: path("M-120 -20 C -80 -80, -20 -90, 20 -60 C 90 -10, 58 70, -8 78 C -80 82, -140 30, -120 -20 Z"); }
      33% { d: path("M-100 -40 C -40 -110, 20 -90, 60 -40 C 105 12, 98 72, 20 86 C -60 100, -150 24, -100 -40 Z"); }
      66% { d: path("M-120 -12 C -64 -68, -12 -100, 36 -50 C 92 12, 80 72, 4 86 C -70 96, -150 20, -120 -12 Z"); }
      100% { d: path("M-120 -20 C -80 -80, -20 -90, 20 -60 C 90 -10, 58 70, -8 78 C -80 82, -140 30, -120 -20 Z"); }
    }

    /* Sound button */
    .sound-btn {
      position: absolute;
      bottom: 10px;
      right: 10px;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
    }
    
    .sound-btn:hover {
      background: var(--accent);
      color: var(--bg);
    }

    /* Species info panel */
    .species-info {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(2,8,14,0.9));
      padding: 20px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }
    
    .card:hover .species-info {
      transform: translateY(0);
    }

    /* Advanced lab controls */
    .lab-controls {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 15px;
    }
    
    .control-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .control-label {
      font-size: 12px;
      color: rgba(223,231,235,0.75);
      display: flex;
      justify-content: space-between;
    }
    
    .control-value {
      color: var(--accent);
      font-family: 'Orbitron', sans-serif;
    }

    /* Enhanced ecosystem */
    .ecosystem-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
      gap: 10px;
      margin-top: 15px;
    }
    
    .ecosystem-item {
      aspect-ratio: 1;
      border-radius: 8px;
      background: rgba(255,255,255,0.05);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .ecosystem-item.unlocked {
      background: rgba(6,247,255,0.1);
      border: 1px solid rgba(6,247,255,0.3);
    }
    
    .ecosystem-item:hover {
      transform: scale(1.1);
      box-shadow: 0 0 15px rgba(6,247,255,0.3);
    }

    /* Right-click protection modal */
    .protection-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(2,8,14,0.95);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .protection-modal.active {
      opacity: 1;
      visibility: visible;
    }
    
    .protection-content {
      background: var(--card);
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,0.06);
      padding: 30px;
      max-width: 500px;
      text-align: center;
      box-shadow: 0 20px 40px rgba(2,8,14,0.8);
      transform: scale(0.9);
      transition: transform 0.3s ease;
    }
    
    .protection-modal.active .protection-content {
      transform: scale(1);
    }
    
    .protection-icon {
      font-size: 48px;
      color: var(--accent);
      margin-bottom: 20px;
    }
    
    .protection-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 24px;
      margin-bottom: 15px;
      color: var(--muted);
    }
    
    .protection-message {
      color: rgba(223,231,235,0.7);
      margin-bottom: 25px;
      line-height: 1.6;
    }

    /* Responsive */
    @media (max-width:1000px){
      .hero{grid-template-columns:1fr;}
      .carousel{grid-template-columns:repeat(2,1fr)}
      .masonry{grid-template-columns:repeat(2,1fr)}
      .lab{grid-template-columns:1fr}
      .lab-controls{grid-template-columns:1fr}
    }
    @media (max-width:768px){
      header{padding:12px 0}
      .container{padding:24px}
      .hero{padding:32px 0 60px}
      section{padding:32px 0}
      h2{font-size:36px}
      
      /* Mobile navigation */
      nav{display:none;position:absolute;top:80px;left:0;right:0;background:var(--bg);flex-direction:column;padding:20px;z-index:1000;border-top:1px solid rgba(255,255,255,0.05)}
      nav.active{display:flex}
      .mobile-menu-btn{display:flex}
      
      .hero-ctas{flex-direction:column;align-items:stretch}
      .reveal-card{margin-top:20px}
    }
    @media (max-width:600px){
      h2{font-size:28px}
      .carousel{grid-template-columns:1fr}
      .masonry{grid-template-columns:1fr}
      .globe-wrap{height:280px}
      .story-container{height:300px}
      .story-content{font-size:16px}
    }

    /* Loading animation */
    @keyframes shimmer {
      0% { background-position: -200px 0; }
      100% { background-position: calc(200px + 100%) 0; }
    }
    .loading {
      background: linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 37%, rgba(255,255,255,0.1) 63%);
      background-size: 200px 100%;
      animation: shimmer 1.5s infinite;
    }

    /* Notification */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 12px 20px;
      background: var(--card);
      border: 1px solid var(--accent);
      border-radius: 8px;
      color: var(--accent);
      font-family: 'Orbitron', sans-serif;
      z-index: 1000;
      transform: translateX(150%);
      transition: transform 0.3s ease;
    }
    
    .notification.show {
      transform: translateX(0);
    }

  </style>
</head>
<body>
  <!-- Right-click Protection Modal -->
  <div class="protection-modal" id="protectionModal">
    <div class="protection-content">
      <div class="protection-icon">
        <i class="fas fa-shield-alt"></i>
      </div>
      <h2 class="protection-title">Right-Click Disabled</h2>
      <p class="protection-message">
        For security reasons, right-click functionality has been disabled on this page. 
        This helps protect our proprietary technology and content.
      </p>
      <button class="btn cta" id="closeProtection">Understood</button>
    </div>
  </div>

  <div id="particles"></div>
  
  <!-- Notification -->
  <div class="notification" id="notification">
    Species added to ecosystem!
  </div>

  <header class="container">
    <div class="brand">
      <div class="logo" aria-hidden="true">
        <!-- stylized fossil + neuron icon -->
        <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="32" cy="32" r="30" fill="rgba(255,255,255,0.06)"/>
          <path d="M20 36c6-10 16-12 24-6" stroke="white" stroke-opacity="0.9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="24" cy="26" r="2.6" fill="#fff"/>
          <circle cx="40" cy="30" r="2.2" fill="#fff"/>
        </svg>
      </div>
      <div>
        <h1>EchoFauna</h1>
        <p>Reviving the Voices of the Extinct</p>
      </div>
    </div>
    <button class="mobile-menu-btn" id="mobileMenuBtn">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <nav id="mainNav">
      <a class="btn" href="#archive">Archive</a>
      <a class="btn" href="#stories">Stories</a>
      <a class="btn" href="#lab">AI Lab</a>
      <a class="btn" href="#action">Take Action</a>
      <a class="btn cta" href="#explore">Explore</a>
    </nav>
  </header>

  <main class="container">

    <!-- HERO -->
    <section class="hero" role="region" aria-label="Hero">
      <div class="hero-left">
        <span class="eyebrow">AI • CONSERVATION • ART</span>
        <h2 class="glow">From Fossil to Breath —<br>We Recreate What Time Took</h2>
        <p class="lead">EchoFauna blends historical records, community knowledge, and modern AI to resurrect lifelike digital models of extinct species — to learn, mourn, and act.</p>
        <div class="hero-ctas">
          <a class="btn cta" href="#archive">Explore the Archive</a>
          <a class="btn" href="#lab">Revive with Us</a>
        </div>
      </div>

      <div class="reveal-card">
        <div id="reveal" class="reveal-canvas" aria-hidden="true"></div>
        <div class="reveal-meta">
          <div>
            <div class="tag">Featured • Dodo (Raphus cucullatus)</div>
            <div style="font-size:13px;color:rgba(223,231,235,0.6)">Extinct: late 17th century • Mauritius</div>
          </div>
          <div style="font-size:13px;color:rgba(223,231,235,0.6)">Interactive • WebAR • Sound</div>
        </div>
      </div>
    </section>

    <!-- ABOUT & GLOBE -->
    <section id="archive">
      <div class="glass-card" style="display:flex;gap:18px;align-items:center;flex-wrap:wrap;">
        <div style="flex:1;min-width:280px">
          <h3 style="margin-top:0;font-family:'Orbitron',sans-serif">Holographic Archive</h3>
          <p style="margin:6px 0 0;color:rgba(223,231,235,0.75)">Explore a globe of lost species — click hotspots to open immersive profiles, hear AI-generated calls, and read their stories.</p>
          <div style="margin-top:12px;display:flex;gap:10px">
            <a class="btn" href="#stories">Stories</a>
            <a class="btn" href="#lab">Try AI Lab</a>
          </div>
        </div>

        <div style="flex:1;min-width:320px;position:relative">
          <div class="globe-wrap" id="globeWrap"></div>
          <div class="globe-overlay">
            <p>Click on glowing points to explore extinct species</p>
          </div>
        </div>
      </div>
    </section>

    <!-- FEATURED CAROUSEL -->
    <section aria-label="Featured species">
      <h3 style="font-family:'Orbitron',sans-serif">Featured Revivals</h3>
      <div class="carousel" id="carousel">
        <article class="card">
          <div class="img">
            <img src="https://images.unsplash.com/photo-1564349683136-77e08dba1ef7?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Dodo bird reconstruction" loading="lazy">
            <button class="sound-btn" data-species="dodo">
              <i class="fas fa-volume-up"></i>
            </button>
          </div>
          <div class="meta">
            <h4>Dodo</h4>
            <p>End of 17th C — Mauritius</p>
          </div>
          <div class="species-info">
            <p style="font-size:12px;margin:0">Flightless bird that inhabited Mauritius. Went extinct due to human activity and introduced species.</p>
          </div>
        </article>

        <article class="card">
          <div class="img">
            <img src="https://images.unsplash.com/photo-1522926193341-e9ffd686c60f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="Passenger pigeon reconstruction" loading="lazy">
            <button class="sound-btn" data-species="pigeon">
              <i class="fas fa-volume-up"></i>
            </button>
          </div>
          <div class="meta">
            <h4>Passenger Pigeon</h4>
            <p>1914 — North America</p>
          </div>
          <div class="species-info">
            <p style="font-size:12px;margin:0">Once the most abundant bird in North America, hunted to extinction in the early 20th century.</p>
          </div>
        </article>

        <article class="card">
          <div class="img">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Thylacine.jpg/640px-Thylacine.jpg" alt="Tasmanian tiger reconstruction" loading="lazy">
            <button class="sound-btn" data-species="tiger">
              <i class="fas fa-volume-up"></i>
            </button>
          </div>
          <div class="meta">
            <h4>Tasmanian Tiger</h4>
            <p>1936 — Australia</p>
          </div>
          <div class="species-info">
            <p style="font-size:12px;margin:0">Carnivorous marsupial native to Tasmania, New Guinea, and Australia. Last known specimen died in Hobart Zoo.</p>
          </div>
        </article>
      </div>
    </section>

    <!-- STORYTELLING MODE -->
    <section id="stories">
      <h3 style="font-family:'Orbitron',sans-serif">Immersive Stories</h3>
      <div class="glass-card" style="margin-top:12px;overflow:hidden;border-radius:16px;">
        <div style="padding:16px">
          <p style="margin:0 0 8px;color:rgba(223,231,235,0.75)"><strong>The Last Tasmanian Tiger</strong> — Navigate through the animated narrative to witness habitat change, the last sighting, and a digital resurrection.</p>
        </div>
        <div class="story-container">
          <div class="story-scene active" id="scene1" style="background-image: linear-gradient(rgba(2,8,14,0.7), rgba(2,8,14,0.7)), url('https://images.unsplash.com/photo-1544551763-46a013bb70d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')">
            <div class="story-title">Habitat</div>
            <div class="story-content">The Tasmanian tiger thrived in the diverse ecosystems of Tasmania, Australia, and New Guinea. These marsupial predators hunted in the eucalyptus forests and grasslands.</div>
          </div>
          <div class="story-scene" id="scene2" style="background-image: linear-gradient(rgba(2,8,14,0.7), rgba(2,8,14,0.7)), url('https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')">
            <div class="story-title">Pressure</div>
            <div class="story-content">Human expansion, hunting, and habitat destruction led to their rapid decline. Bounties were placed on thylacines, accelerating their extinction.</div>
          </div>
          <div class="story-scene" id="scene3" style="background-image: linear-gradient(rgba(2,8,14,0.7), rgba(2,8,14,0.7)), url('https://images.unsplash.com/photo-1516937941344-00b4e0337589?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')">
            <div class="story-title">The Last Sighting</div>
            <div class="story-content">The last known Tasmanian tiger died in captivity in Hobart Zoo on September 7, 1936. This date is now commemorated as National Threatened Species Day in Australia.</div>
          </div>
          <div class="story-scene" id="scene4" style="background-image: linear-gradient(rgba(2,8,14,0.7), rgba(2,8,14,0.7)), url('https://images.unsplash.com/photo-1535223289827-42f1e9919769?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')">
            <div class="story-title">Digital Resurrection</div>
            <div class="story-content">Through AI and scientific research, we're bringing this unique species back to digital life. Our reconstruction is based on historical records, skeletal remains, and genetic analysis.</div>
          </div>
        </div>
        <div class="story-controls">
          <button class="story-btn" id="prevStory">
            <i class="fas fa-chevron-left"></i>
          </button>
          <div class="story-nav">
            <div class="story-dot active" data-scene="0"></div>
            <div class="story-dot" data-scene="1"></div>
            <div class="story-dot" data-scene="2"></div>
            <div class="story-dot" data-scene="3"></div>
          </div>
          <button class="story-btn" id="nextStory">
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>
    </section>

    <!-- AI Lab Playground -->
    <section id="lab">
      <h3 style="font-family:'Orbitron',sans-serif">AI Lab Playground</h3>
      <div class="lab" style="margin-top:12px">
        <div class="console">
          <p style="margin:0 0 10px;color:rgba(223,231,235,0.8)"><strong>Build a speculative revival</strong> — tweak sliders or enter a short description and press <em>Generate</em>.</p>
          
          <div class="lab-controls">
            <div class="control-group">
              <div class="control-label">
                <span>Feather / Fur</span>
                <span class="control-value" id="furValue">60%</span>
              </div>
              <input id="s1" type="range" min="0" max="100" value="60">
            </div>
            
            <div class="control-group">
              <div class="control-label">
                <span>Size</span>
                <span class="control-value" id="sizeValue">120%</span>
              </div>
              <input id="s2" type="range" min="10" max="300" value="120">
            </div>
            
            <div class="control-group">
              <div class="control-label">
                <span>Color Intensity</span>
                <span class="control-value" id="colorValue">40%</span>
              </div>
              <input id="s3" type="range" min="0" max="100" value="40">
            </div>
            
            <div class="control-group">
              <div class="control-label">
                <span>Habitat Match</span>
                <span class="control-value" id="habitatValue">75%</span>
              </div>
              <input id="s4" type="range" min="0" max="100" value="75">
            </div>
          </div>
          
          <div style="display:flex;gap:8px;margin-top:8px">
            <input id="desc" placeholder="Describe an extinct animal (e.g. 'large flightless bird with hooked beak')" style="flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--muted)"/>
            <button id="gen" class="btn cta">Generate</button>
          </div>
          
          <div class="search-results" id="searchResults" style="display:none">
            <!-- Search results will appear here -->
          </div>
          
          <p style="margin-top:12px;font-size:13px;color:rgba(223,231,235,0.55)">Note: the generator provides speculative visuals for education and storytelling.</p>
        </div>
        
        <div style="display:flex;flex-direction:column;gap:12px">
          <div class="reveal-card" style="padding:12px">
            <div id="labCanvas" class="ai-preview">
              <div class="placeholder">AI Render Preview<br><small>Describe an animal and click Generate</small></div>
            </div>
          </div>
          
          <div class="glass-card">
            <strong>Quick Tips</strong>
            <ul style="margin:8px 0 0;padding-left:18px;color:rgba(223,231,235,0.65)">
              <li>Use concise descriptors for best speculative results.</li>
              <li>Adjust sliders to explore morphological variations.</li>
              <li>Share interesting renderings with the community.</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Ecosystem Simulator -->
    <section id="action">
      <h3 style="font-family:'Orbitron',sans-serif">Ecosystem Simulator</h3>
      <div class="glass-card" style="margin-top:12px;display:flex;gap:18px;align-items:center;flex-wrap:wrap">
        <div style="flex:1;min-width:300px">
          <p style="margin:0;color:rgba(223,231,235,0.75)">As users explore and 'revive' species, a visual ecosystem grows. Your progress helps highlight the impact of biodiversity loss.</p>
          <div style="margin-top:12px" class="ecosim">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div>Revivals</div>
              <div id="revCount">0</div>
            </div>
            <div style="margin-top:12px" class="progress"><i id="prog"></i></div>
            <div style="margin-top:8px;font-size:12px;color:rgba(223,231,235,0.6)">Complete the ecosystem by reviving more species</div>
          </div>
          
          <div class="ecosystem-grid" id="ecosystemGrid">
            <!-- Ecosystem items will be populated by JavaScript -->
          </div>
        </div>
        
        <div style="flex:1;min-width:320px">
          <div id="ecosimCanvas" style="height:150px;border-radius:10px;background:linear-gradient(90deg,#031415,#041b1f);display:flex;align-items:center;justify-content:center;color:rgba(223,231,235,0.6);position:relative;overflow:hidden">
            <div id="ecosystemAnimation">
              <!-- Animated ecosystem elements will appear here -->
            </div>
            <div style="position:absolute;bottom:10px;left:10px;font-size:12px;color:rgba(223,231,235,0.7)">
              Ecosystem Health: <span id="ecoHealth">0%</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Community -->
    <section>
      <h3 style="font-family:'Orbitron',sans-serif">Community Contributions</h3>
      <div class="masonry" style="margin-top:12px">
        <div class="m">
          <div style="font-size:12px;color:var(--accent)">Contributor: F. Ahithopel</div>
          <div style="font-size:10px;color:rgba(223,231,235,0.6)">AI sketch of Moa bird</div>
        </div>
        <div class="m">
          <div style="font-size:12px;color:var(--accent)">Contributor: J. Wanjiru</div>
          <div style="font-size:10px;color:rgba(223,231,235,0.6)">Habitat notes for Dodo</div>
        </div>
        <div class="m">
          <div style="font-size:12px;color:var(--accent)">Contributor: F. Mudambi</div>
          <div style="font-size:10px;color:rgba(223,231,235,0.6)">Audio reconstruction</div>
        </div>
        <div class="m">
          <div style="font-size:12px;color:var(--accent)">Contributor: S. Wanjiku</div>
          <div style="font-size:10px;color:rgba(223,231,235,0.6)">3D render of Sabertooth</div>
        </div>
      </div>
    </section>

  </main>

  <footer class="container">
    <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:18px">
      <div>
        <strong>EchoFauna</strong>
        <div style="font-size:13px;color:rgba(223,231,235,0.6)">Reviving the Voices of the Extinct</div>
        <div class="social-links">
          <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
          <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
          <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
          <a href="#" aria-label="GitHub"><i class="fab fa-github"></i></a>
        </div>
      </div>
      <div style="display:flex;gap:12px;align-items:center">
        <a class="btn" href="#">Partnerships</a>
        <a class="btn" href="#">Donate</a>
      </div>
    </div>
  </footer>

  <!-- =========== Scripts =========== -->
  <script>
    // Enhanced EchoFauna Implementation

    /* =========== Right-Click Protection =========== */
    document.addEventListener('contextmenu', function(e) {
      e.preventDefault();
      document.getElementById('protectionModal').classList.add('active');
    });

    document.getElementById('closeProtection').addEventListener('click', function() {
      document.getElementById('protectionModal').classList.remove('active');
    });

    /* =========== Mobile Menu =========== */
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const mainNav = document.getElementById('mainNav');
    
    mobileMenuBtn.addEventListener('click', () => {
      mobileMenuBtn.classList.toggle('active');
      mainNav.classList.toggle('active');
    });

    /* =========== Enhanced particle background =========== */
    (function(){
      const canvas = document.createElement('canvas');
      canvas.id = 'pCanvas';
      const root = document.getElementById('particles');
      root.appendChild(canvas);
      const ctx = canvas.getContext('2d');
      let w,h,dpr;
      const particles = [];
      
      function resize(){
        dpr = Math.min(2, window.devicePixelRatio || 1); 
        w = canvas.width = Math.floor(window.innerWidth*dpr); 
        h = canvas.height = Math.floor(window.innerHeight*dpr); 
        canvas.style.width = window.innerWidth +'px'; 
        canvas.style.height = window.innerHeight +'px'; 
        ctx.scale(dpr,dpr);
      }
      
      window.addEventListener('resize', resize); 
      resize();
      
      // Create particles with different properties
      for(let i=0;i<150;i++){
        particles.push({
          x:Math.random()*window.innerWidth,
          y:Math.random()*window.innerHeight, 
          vx:(Math.random()-0.5)*0.3, 
          vy:(Math.random()-0.5)*0.3, 
          r:Math.random()*3+0.5, 
          alpha:Math.random()*0.7+0.3,
          color: Math.random() > 0.5 ? 'rgba(6,247,255,' : 'rgba(169,255,51,'
        });
      }
      
      function tick(){
        ctx.clearRect(0,0,window.innerWidth,window.innerHeight); 
        
        // Draw connecting lines
        ctx.strokeStyle = 'rgba(6,247,255,0.03)';
        ctx.lineWidth = 0.5;
        
        for(let i=0;i<particles.length;i++){
          for(let j=i+1;j<particles.length;j++){
            const dx = particles[i].x - particles[j].x;
            const dy = particles[i].y - particles[j].y;
            const distance = Math.sqrt(dx*dx + dy*dy);
            
            if(distance < 100){
              ctx.beginPath();
              ctx.moveTo(particles[i].x, particles[i].y);
              ctx.lineTo(particles[j].x, particles[j].y);
              ctx.stroke();
            }
          }
        }
        
        // Draw particles
        for(let p of particles){
          p.x+=p.vx; 
          p.y+=p.vy; 
          
          if(p.x<-10) p.x=window.innerWidth+10; 
          if(p.x>window.innerWidth+10) p.x=-10; 
          if(p.y<-10) p.y=window.innerHeight+10; 
          if(p.y>window.innerHeight+10) p.y=-10; 
          
          ctx.beginPath(); 
          ctx.fillStyle = p.color + (p.alpha*0.1) + ')'; 
          ctx.arc(p.x,p.y,p.r,0,Math.PI*2); 
          ctx.fill();
        } 
        
        requestAnimationFrame(tick);
      }
      
      requestAnimationFrame(tick);
    })();

    /* =========== Enhanced three.js globe with hotspots =========== */
    (function(){
      const wrap = document.getElementById('globeWrap');
      if (!wrap) return;
      
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(40, wrap.clientWidth/wrap.clientHeight, 0.1, 1000);
      camera.position.set(0,0,4.2);
      
      const renderer = new THREE.WebGLRenderer({antialias:true, alpha:true});
      renderer.setSize(wrap.clientWidth, wrap.clientHeight); 
      renderer.setPixelRatio(window.devicePixelRatio);
      wrap.appendChild(renderer.domElement);
      
      // Add controls for interactive globe
      const controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.dampingFactor = 0.05;
      controls.rotateSpeed = 0.5;
      
      const light = new THREE.PointLight(0x99fffb,1.2); 
      light.position.set(5,5,5); 
      scene.add(light);
      
      const ambient = new THREE.AmbientLight(0x223344,0.6); 
      scene.add(ambient);
      
      // Create a more detailed globe
      const geometry = new THREE.SphereGeometry(1.6, 64, 64);
      
      // Create a custom material with emissive properties
      const mat = new THREE.MeshStandardMaterial({
        color:0x07212a, 
        metalness:0.1, 
        roughness:0.7, 
        emissive:0x001016, 
        emissiveIntensity:0.3
      });
      
      const globe = new THREE.Mesh(geometry, mat); 
      scene.add(globe);
      
      // Add cloud layer
      const cloudGeometry = new THREE.SphereGeometry(1.65, 64, 64);
      const cloudMaterial = new THREE.MeshBasicMaterial({
        color: 0xffffff,
        transparent: true,
        opacity: 0.1
      });
      const clouds = new THREE.Mesh(cloudGeometry, cloudMaterial);
      scene.add(clouds);
      
      // Enhanced hotspots with different colors
      const hotspots = [ 
        {name:'Dodo', lat:-20.3, lon:57.6, color: 0x06f7ff},
        {name:'Passenger Pigeon', lat:40.0, lon:-95.0, color: 0xa9ff33},
        {name:'Thylacine', lat:-42.0, lon:145.0, color: 0xff3366},
        {name:'Woolly Mammoth', lat:70.0, lon:100.0, color: 0xffb347},
        {name:'Saber-toothed Cat', lat:35.0, lon:-120.0, color: 0x9d4edd}
      ];
      
      const hotspotObjects = [];
      const dotGeo = new THREE.SphereGeometry(0.05, 16, 16);
      
      for(const h of hotspots){
        const phi = (90 - h.lat) * (Math.PI/180);
        const theta = (h.lon + 180) * (Math.PI/180);
        const x = - (1.6 * Math.sin(phi) * Math.cos(theta));
        const y = 1.6 * Math.cos(phi);
        const z = 1.6 * Math.sin(phi) * Math.sin(theta);
        
        const dotMat = new THREE.MeshBasicMaterial({color: h.color});
        const dot = new THREE.Mesh(dotGeo, dotMat);
        dot.position.set(x,y,z);
        dot.userData = {name:h.name, color: h.color};
        scene.add(dot);
        hotspotObjects.push(dot);
        
        // Add a glow effect with a larger, transparent sphere
        const glowGeo = new THREE.SphereGeometry(0.08, 16, 16);
        const glowMat = new THREE.MeshBasicMaterial({
          color: h.color,
          transparent: true,
          opacity: 0.3
        });
        const glow = new THREE.Mesh(glowGeo, glowMat);
        glow.position.set(x,y,z);
        scene.add(glow);
        hotspotObjects.push(glow);
      }
      
      // Enhanced interaction
      const ray = new THREE.Raycaster();
      const mouse = new THREE.Vector2();
      
      function onMouseMove(e){ 
        const rect = renderer.domElement.getBoundingClientRect(); 
        mouse.x = ((e.clientX-rect.left)/rect.width)*2-1; 
        mouse.y = -((e.clientY-rect.top)/rect.height)*2+1;
        
        // Highlight hotspots on hover
        ray.setFromCamera(mouse, camera);
        const intersects = ray.intersectObjects(hotspotObjects);
        
        // Reset all hotspots
        hotspotObjects.forEach(obj => {
          if (obj.material && obj.material.emissive) {
            obj.material.emissive.setHex(0x000000);
          }
        });
        
        // Highlight intersected hotspot
        if(intersects.length > 0){
          const obj = intersects[0].object;
          if (obj.material && obj.material.emissive) {
            obj.material.emissive.setHex(0xffffff);
          }
        }
      }
      
      function onClick(){ 
        ray.setFromCamera(mouse, camera); 
        const intersects = ray.intersectObjects(hotspotObjects); 
        if(intersects.length){ 
          const name = intersects[0].object.userData.name;
          showNotification(`Opening archive: ${name}`);
        } 
      }
      
      renderer.domElement.addEventListener('mousemove', onMouseMove);
      renderer.domElement.addEventListener('click', onClick);
      
      function animate(){ 
        requestAnimationFrame(animate); 
        globe.rotation.y += 0.001; 
        clouds.rotation.y += 0.0005;
        controls.update();
        
        // Animate hotspots
        for(const d of hotspotObjects){
          d.position.applyAxisAngle(new THREE.Vector3(0,1,0), 0.0003);
        }
        
        renderer.render(scene, camera);
      }
      
      animate();
      
      window.addEventListener('resize', ()=>{ 
        renderer.setSize(wrap.clientWidth, wrap.clientHeight); 
        camera.aspect = wrap.clientWidth/wrap.clientHeight; 
        camera.updateProjectionMatrix(); 
      });
    })();

    /* =========== Enhanced reveal animation =========== */
    (function(){
      const el = document.getElementById('reveal');
      if (!el) return;
      
      // Create a more complex animated SVG
      el.innerHTML = `
        <svg viewBox="0 0 600 420" preserveAspectRatio="xMidYMid slice" style="width:100%;height:100%" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="g1" x1="0" x2="1">
              <stop offset="0" stop-color="#06f7ff" stop-opacity="0.18"/>
              <stop offset="0.5" stop-color="#a9ff33" stop-opacity="0.12"/>
              <stop offset="1" stop-color="#06f7ff" stop-opacity="0.18"/>
            </linearGradient>
            <linearGradient id="g2" x1="0" x2="1">
              <stop offset="0" stop-color="#a9ff33" stop-opacity="0.1"/>
              <stop offset="1" stop-color="#06f7ff" stop-opacity="0.1"/>
            </linearGradient>
            <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="10" result="b"/>
              <feMerge>
                <feMergeNode in="b"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
          </defs>
          <rect width="100%" height="100%" fill="#031415"/>
          <g id="morph" transform="translate(300 210)">
            <path class="morph-path" fill="url(#g1)" filter="url(#glow)"/>
            <circle cx="0" cy="0" r="80" fill="url(#g2)" opacity="0.3">
              <animate attributeName="r" values="80;90;80" dur="4s" repeatCount="indefinite"/>
            </circle>
          </g>
        </svg>
      `;
    })();

    /* =========== Enhanced Story Carousel =========== */
    (function(){
      const scenes = document.querySelectorAll('.story-scene');
      const dots = document.querySelectorAll('.story-dot');
      const prevBtn = document.getElementById('prevStory');
      const nextBtn = document.getElementById('nextStory');
      
      if (scenes.length === 0) return;
      
      let currentScene = 0;
      let autoAdvance = true;
      let autoAdvanceInterval;
      
      // Start auto-advance
      startAutoAdvance();
      
      // Set up dot navigation
      dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
          autoAdvance = false;
          clearInterval(autoAdvanceInterval);
          setScene(index);
          // Restart auto-advance after manual interaction
          setTimeout(() => {
            autoAdvance = true;
            startAutoAdvance();
          }, 10000);
        });
      });
      
      // Previous button
      prevBtn.addEventListener('click', () => {
        autoAdvance = false;
        clearInterval(autoAdvanceInterval);
        setScene(currentScene - 1);
        // Restart auto-advance after manual interaction
        setTimeout(() => {
          autoAdvance = true;
          startAutoAdvance();
        }, 10000);
      });
      
      // Next button
      nextBtn.addEventListener('click', () => {
        autoAdvance = false;
        clearInterval(autoAdvanceInterval);
        setScene(currentScene + 1);
        // Restart auto-advance after manual interaction
        setTimeout(() => {
          autoAdvance = true;
          startAutoAdvance();
        }, 10000);
      });
      
      function startAutoAdvance() {
        if (autoAdvance) {
          autoAdvanceInterval = setInterval(() => {
            currentScene = (currentScene + 1) % scenes.length;
            setScene(currentScene);
          }, 5000);
        }
      }
      
      function setScene(index) {
        // Handle wrap-around
        if (index < 0) index = scenes.length - 1;
        if (index >= scenes.length) index = 0;
        
        // Hide all scenes
        scenes.forEach(scene => scene.classList.remove('active'));
        dots.forEach(dot => dot.classList.remove('active'));
        
        // Show selected scene
        scenes[index].classList.add('active');
        dots[index].classList.add('active');
        currentScene = index;
      }
    })();

    /* =========== Sound buttons for species cards =========== */
    (function(){
      const soundButtons = document.querySelectorAll('.sound-btn');
      
      soundButtons.forEach(btn => {
        btn.addEventListener('click', function(e) {
          e.stopPropagation();
          const species = this.getAttribute('data-species');
          showNotification(`Playing ${species} call (simulated)`);
          
          // In a real implementation, this would play an actual sound
          // For now, we'll just show a notification
        });
      });
    })();

    /* =========== Enhanced AI Lab with real image generation =========== */
    (function(){
      const s1=document.getElementById('s1'), 
            s2=document.getElementById('s2'), 
            s3=document.getElementById('s3'),
            s4=document.getElementById('s4'),
            gen=document.getElementById('gen'), 
            desc=document.getElementById('desc'), 
            lab=document.getElementById('labCanvas'),
            furValue=document.getElementById('furValue'),
            sizeValue=document.getElementById('sizeValue'),
            colorValue=document.getElementById('colorValue'),
            habitatValue=document.getElementById('habitatValue');
      
      if (!gen) return;
      
      // Real-time slider updates
      function updateSliderValues() {
        furValue.textContent = `${s1.value}%`;
        sizeValue.textContent = `${s2.value}%`;
        colorValue.textContent = `${s3.value}%`;
        habitatValue.textContent = `${s4.value}%`;
        
        // Update preview in real-time
        updatePreview();
      }
      
      // Update slider values in real-time
      s1.addEventListener('input', updateSliderValues);
      s2.addEventListener('input', updateSliderValues);
      s3.addEventListener('input', updateSliderValues);
      s4.addEventListener('input', updateSliderValues);
      
      // Function to update preview based on slider values
      function updatePreview() {
        const feather = s1.value; 
        const size = s2.value; 
        const col = Math.floor(100 + s3.value*1.5); 
        const habitat = s4.value;
        
        // Create a visual representation based on slider values
        const preview = document.createElement('div');
        preview.innerHTML = `
          <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%">
            <rect width="100%" height="100%" fill="#021416"/>
            <g transform="translate(200 160)">
              <ellipse rx="${size/8}" ry="${size/16}" fill="rgba(0,0,0,0.25)"/>
            </g>
            <g transform="translate(200 140)">
              <path d="M -80 20 C -20 -${feather/2} 20 -${feather+10} 80 20 C 60 40 10 50 -20 48 C -60 46 -75 36 -80 20 Z" 
                    fill="rgba(${col},200,180,0.7)"/>
            </g>
            <text x="12" y="20" fill="rgba(223,231,235,0.7)" font-size="12">
              Preview • Size:${size}% • Color:${s3.value}%
            </text>
          </svg>
        `;
        
        // Only update if we're not showing a generated image
        if (!lab.querySelector('img')) {
          lab.innerHTML = '';
          lab.appendChild(preview);
        }
      }
      
      // Initialize preview
      updatePreview();
      
      // Function to generate image based on description using Unsplash API
      async function generateAnimalImage(description) {
        // Show loading state
        lab.innerHTML = '<div class="placeholder loading">Generating AI reconstruction...</div>';
        
        try {
          // Use Unsplash API with the provided access key
          const accessKey = 'jm0216a5Gr0eVxpVvkYLSNfebAd9Q-Enk1bakXw84cc';
          const query = encodeURIComponent(description + ' animal extinct');
          
          const response = await fetch(`https://api.unsplash.com/search/photos?query=${query}&per_page=5&client_id=${accessKey}`);
          const data = await response.json();
          
          if (data.results && data.results.length > 0) {
            // Return the first result
            return data.results[0].urls.regular;
          } else {
            // Fallback if no results found
            throw new Error('No images found');
          }
        } catch (error) {
          console.error('Error fetching from Unsplash:', error);
          
          // Fallback to a curated set of images based on keywords
          const keyword = description.toLowerCase();
          let imageUrl;
          
          if (keyword.includes('dodo') || keyword.includes('flightless') || keyword.includes('mauritius')) {
            imageUrl = 'https://images.unsplash.com/photo-1564349683136-77e08dba1ef7?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80';
          } else if (keyword.includes('pigeon') || keyword.includes('bird') || keyword.includes('flock')) {
            imageUrl = 'https://images.unsplash.com/photo-1522926193341-e9ffd686c60f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80';
          } else if (keyword.includes('tiger') || keyword.includes('thylacine') || keyword.includes('marsupial')) {
            imageUrl = 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Thylacine.jpg/640px-Thylacine.jpg';
          } else if (keyword.includes('mammoth') || keyword.includes('woolly') || keyword.includes('elephant')) {
            imageUrl = 'https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80';
          } else if (keyword.includes('sabertooth') || keyword.includes('saber') || keyword.includes('cat')) {
            imageUrl = 'https://images.unsplash.com/photo-1516937941344-00b4e0337589?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80';
          } else {
            // Fallback to a random extinct animal image
            const fallbacks = [
              'https://images.unsplash.com/photo-1564349683136-77e08dba1ef7?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
              'https://images.unsplash.com/photo-1522926193341-e9ffd686c60f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
              'https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Thylacine.jpg/640px-Thylacine.jpg',
              'https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80'
            ];
            imageUrl = fallbacks[Math.floor(Math.random() * fallbacks.length)];
          }
          
          return imageUrl;
        }
      }
      
      gen.addEventListener('click', async ()=>{ 
        if (!desc.value.trim()) {
          showNotification('Please describe an animal first');
          return;
        }
        
        try {
          const imageUrl = await generateAnimalImage(desc.value);
          
          // Display the generated image
          lab.innerHTML = `<img src="${imageUrl}" alt="AI reconstruction of ${desc.value}" />`;
          
          // Update ecosystem
          updateEcosystem();
          
          showNotification('Species revived and added to ecosystem!');
        } catch (error) {
          console.error('Error generating image:', error);
          lab.innerHTML = '<div class="placeholder">Error generating reconstruction. Please try again.</div>';
        }
      });
    })();

    /* =========== Enhanced Ecosystem Simulator =========== */
    (function(){
      const ecosystemGrid = document.getElementById('ecosystemGrid');
      const ecoHealth = document.getElementById('ecoHealth');
      const ecosystemAnimation = document.getElementById('ecosystemAnimation');
      
      // Initialize ecosystem grid
      function initEcosystemGrid() {
        const totalItems = 12;
        for (let i = 0; i < totalItems; i++) {
          const item = document.createElement('div');
          item.className = 'ecosystem-item';
          item.innerHTML = '<i class="fas fa-question" style="color:rgba(223,231,235,0.3)"></i>';
          ecosystemGrid.appendChild(item);
        }
      }
      
      // Update ecosystem based on revived species count
      function updateEcosystem() {
        const count = Number(localStorage.getItem('revCount') || 0) + 1;
        localStorage.setItem('revCount', count);
        
        document.getElementById('revCount').textContent = count;
        const pct = Math.min(100, (count/12)*100);
        document.getElementById('prog').style.width = pct + '%';
        
        // Update ecosystem health
        ecoHealth.textContent = `${Math.round(pct)}%`;
        
        // Update ecosystem grid
        const items = ecosystemGrid.querySelectorAll('.ecosystem-item');
        for (let i = 0; i < items.length; i++) {
          if (i < count) {
            items[i].classList.add('unlocked');
            items[i].innerHTML = '<i class="fas fa-paw" style="color:var(--accent)"></i>';
          }
        }
        
        // Update ecosystem animation
        updateEcosystemAnimation(count);
      }
      
      // Create animated ecosystem visualization
      function updateEcosystemAnimation(count) {
        ecosystemAnimation.innerHTML = '';
        
        // Add animated elements based on count
        const elements = ['🌿', '🐾', '🌳', '🦋', '🐦', '🦎', '🐞', '🌺'];
        
        for (let i = 0; i < Math.min(count * 2, 16); i++) {
          const element = document.createElement('div');
          element.textContent = elements[Math.floor(Math.random() * elements.length)];
          element.style.position = 'absolute';
          element.style.left = `${Math.random() * 90}%`;
          element.style.top = `${Math.random() * 90}%`;
          element.style.fontSize = `${Math.random() * 16 + 12}px`;
          element.style.opacity = '0.7';
          element.style.animation = `float ${Math.random() * 6 + 4}s ease-in-out infinite`;
          element.style.animationDelay = `${Math.random() * 2}s`;
          ecosystemAnimation.appendChild(element);
        }
      }
      
      // Initialize
      initEcosystemGrid();
      
      // Load existing progress
      const count = Number(localStorage.getItem('revCount') || 0);
      if (count > 0) {
        document.getElementById('revCount').textContent = count;
        const pct = Math.min(100, (count/12)*100);
        document.getElementById('prog').style.width = pct + '%';
        ecoHealth.textContent = `${Math.round(pct)}%`;
        
        // Update ecosystem grid
        const items = ecosystemGrid.querySelectorAll('.ecosystem-item');
        for (let i = 0; i < items.length; i++) {
          if (i < count) {
            items[i].classList.add('unlocked');
            items[i].innerHTML = '<i class="fas fa-paw" style="color:var(--accent)"></i>';
          }
        }
        
        updateEcosystemAnimation(count);
      }
      
      // Make updateEcosystem available globally
      window.updateEcosystem = updateEcosystem;
    })();

    /* =========== Notification System =========== */
    function showNotification(message) {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.classList.add('show');
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    /* =========== Scroll Animations =========== */
    (function(){
      const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      };
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.animation = `fadeIn 1s ease forwards`;
          }
        });
      }, observerOptions);
      
      // Observe all sections
      document.querySelectorAll('section').forEach(section => {
        observer.observe(section);
      });
    })();

  </script>
</body>
</html>